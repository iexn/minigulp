(()=>{"use strict";var e,t=Object.prototype.toString;function r(e){if(null==e)return e+"";var r,n=typeof e;if("undefined"===n)return"undefined";if("object"===n||"function"===n){var a=t.call(e).toLowerCase().slice(8,-1);return["boolean","number","string","function","array","date","regexp","object","error","symbol"].includes(a)?a:(r=e,("object"==typeof HTMLElement?r instanceof HTMLElement:r&&"object"==typeof r&&1===r.nodeType&&"string"==typeof r.nodeName)?"dom":"object")}return n}function n(e,t){void 0===t&&(t=2);var r=e+"";if(isNaN(e))return r;for(;r.length<t;)r="0"+r;return r}Array.prototype.slice,e=function e(t){if(void 0===t&&(t=new Date),t.hasOwnProperty("__calendarDate__"))return t;var a,o,i;"string"==r(t)&&(t=t.trim().replace(/-/g,"/")),i=r(o=t),t=["null","undefined"].includes(i)||"boolean"==i&&0==o||"array"==i&&0==o.length||"object"==i&&0==Object.keys(o).length||""===o?new Date:new Date(t),a.ND=t,a.year=t.getFullYear()+"",a.month=n(t.getMonth()+1),a.day=n(t.getDate()),a.hour=n(t.getHours()),a.minute=n(t.getMinutes()),a.second=n(t.getSeconds()),a.week=0==t.getDay()?"7":t.getDay()+"",a.timestamp=t.getTime()+"",a.time=Math.ceil(t.getTime()/1e3)+"",a.secondTimestamp=a.time,a.format=function(e){void 0===e&&(e="Y-m-d");for(var t=/[YmdHis]/g,r={Y:a.year,m:a.month,d:a.day,H:a.hour,i:a.minute,s:a.second,w:a.week},n=null,o=e;n=t.exec(e);)o=o.replace(n[0],r[n[0]]);return o};var l=function(t){return function(){var r=new(Date.bind.apply(Date,function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e}([void 0],t)));return r.getTime()+""==a.timestamp?a:e(r)}};return a.overall.format=l,a.overall.day=l([a.year,+a.month-1,a.day]),a.overall.firstOfYear=l([a.year,0,1]),a.overall.endOfYear=l([+a.year+1,0,0]),a.overall.firstOfMonth=l([a.year,+a.month-1,1]),a.overall.endOfMonth=l([a.year,a.month,0]),Object.defineProperty(a,"__calendarDate__",{enumerable:!1,value:t,writable:!1}),a.step.secondOfYear=function(){return+a.overall.day().secondTimestamp-+a.overall.firstOfYear().secondTimestamp+""},a.step.dayOfYear=function(){return Math.floor(+a.step.secondOfYear()/86400)+1+""},a.step.weekOfYear=function(){return Math.floor((+a.step.dayOfYear()-+a.week)/7)+1+""},a}(),console.log(e)})();